<div id="map-pharmacy-view" class="page-cover-container"></div>

<div class="container-fluid-list">

	<div class="card card-block card-with-subtitle card-no-top-padding">
		<div class="row">
			<div class="col-xl-12 no-padding">
				<div class="page-header-section">
					<h2>
						<b>{{pharmacyDetail.organization_branch || 'Loading...'}}</b>
					</h2>
				</div>
				<div class="card-subtitle">
					<p *ngIf="!isEdit">
						{{pharmacyDetail.locationInfo?.address || 'Loading...'}}
					</p>
					<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="Address" [(ngModel)]="pharmacyDetail.locationInfo.address"></td>
				</div>
			</div>
		</div>
	</div>

	<!-- <div class="row">
		<div class="col-lg-12">
			<button class="btn btn-sm btn-secondary" (click)="goBack()"><i class="fa fa-fw fa-chevron-left"></i> Back</button>
		</div>
	</div>
	<br>
	<div class="card card-block card-no-top-padding"  style="padding: 0px;">
			<div class="page-header-section">
				<div class="row">
					<div class="col-lg-6">
						<div class="detail-header">
							<h2 class="page-header">
								{{pharmacyDetail.organization_branch}}
							</h2>
							<p *ngIf="!isEdit">
								{{pharmacyDetail.locationInfo?.address}}
							</p>
							<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="Address" [(ngModel)]="pharmacyDetail.locationInfo.address"></td>
						</div>
					</div>
					<div class="col-lg-6" style="text-align: right;">
						<button class="btn btn-sm btn-primary" (click)="enableEdit()" *ngIf="isAdmin"><i class="fa fa-fw fa-pencil"></i> Edit</button>
						<button class="btn btn-sm btn-secondary" (click)="disableEdit()" *ngIf="isEdit"><i class="fa fa-fw fa-times"></i> Cancel</button>
					</div>
				</div>
			</div>
	</div> -->

	<!-- <br> -->
	<div class="row">
		<div class="col-lg-12">
			<div class="card">
				<div class="card-header card-default">
					<h5>Pharmacy Details</h5>
				</div>
				<div class="card-block">
					<div class="table-responsive">
						<table class="table table-bordered">
							<tbody>
								<tr>
									<th scope="row">Owner's Name</th>
									<td *ngIf="!isEdit">{{pharmacyDetail.ownerName || 'n/a'}}</td>
									<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="Owner's Name" [(ngModel)]="pharmacyDetail.owner_firstname"></td>
								</tr>
								<tr>
									<th scope="row">Pharmacist's Name</th>
									<td *ngIf="!isEdit">{{pharmacyDetail.pharmacist_firstname || 'n/a'}}</td>
									<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="Pharmacist's Name" [(ngModel)]="pharmacyDetail.pharmacist_firstname"></td>
								</tr>
								<tr>
									<th scope="row">Pharmacist's License Number</th>
									<td *ngIf="!isEdit">{{pharmacyDetail.pharmacist_lastname || 'n/a'}}</td>
									<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="Pharmacist's License Number" [(ngModel)]="pharmacyDetail.pharmacist_lastname"></td>
								</tr>
								<tr>
									<th scope="row">LTO Number</th>
									<td *ngIf="!isEdit">{{pharmacyDetail.license_number || 'n/a'}}</td>
									<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="LTO Number" [(ngModel)]="pharmacyDetail.pharmacist_licensenbr"></td>
								</tr>
								<tr>
									<th scope="row">LTO Expiration Date</th>
									<td *ngIf="!isEdit">{{formatDate(pharmacyDetail.license_expiration_date, true) || 'n/a'}}</td>
									<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="LTO Expiration Date" [(ngModel)]="pharmacyDetail.gov_id1_expirationdate"></td>
								</tr>
								<tr>
									<th scope="row">Business Classification</th>
									<td *ngIf="!isEdit">{{pharmacyDetail.business_classification  || 'n/a'}}</td>
									<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="Business Classification" [(ngModel)]="pharmacyDetail.business_classification"></td>
								</tr>
								<tr>
									<th scope="row">Email Address</th>
									<td *ngIf="!isEdit">{{pharmacyDetail.email || 'n/a'}}</td>
									<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="Email" [(ngModel)]="pharmacyDetail.email"></td>
								</tr>
								<tr>
									<th scope="row">Mobile Number</th>
									<td *ngIf="!isEdit">{{pharmacyDetail.mobile || 'n/a'}}</td>
									<td *ngIf="isEdit"><input type="text" class="form-control" placeholder="Mobile No." [(ngModel)]="pharmacyDetail.mobile"></td>
								</tr>
							</tbody>
						</table>
					</div>
					<br>
					<div class="row">
						<div class="col-lg-12">
							<alert *ngIf="isUpdateSuccess" [type]="alert.type" dismissible="true">
								{{alert.message}}
							</alert>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-12" style="text-align: right;">
							<button class="btn btn-sm btn-success" (click)="update()" *ngIf="isEdit"><i class="fa fa-fw fa-check"></i> Update</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- <div class="col-lg-6">
			<div class="card">
				<div class="card-header card-default">
					<h5>Location</h5>
				</div>
				<div class="card-block">
					<div style="height: 400px !important;">
						<div id="map-pharmacy-view" style="height: 400px;"></div>
					</div>
				</div>
			</div>
		</div> -->
	</div>

	<div class="row">
		<div class="col-lg-6">
			<div class="card">
				<div class="card-header card-default">
					<h5>Expired Medicines</h5>
				</div>
				<div class="card-block">
					<p style="text-align: center;">Empty List.</p>
				</div>
			</div>
		</div>
		<div class="col-lg-6">
			<div class="card">
				<div class="card-header card-default">
					<h5>Counterfeit</h5>
				</div>
				<div class="card-block">
					<p style="text-align: center;">Empty List.</p>
				</div>
			</div>
		</div>
	</div>


	<div class="row">
		<div class="col-lg-12">
			<div class="card">
				<div class="card-header card-default">
					<h5>Transactions</h5>
				</div>
				<div class="card-block">
					<div class="table-responsive">
						<div class="table-responsive">
							<table class="table table-bordered table-hover">
								<thead>
									<tr>
										<th>ID</th>
										<th>Date</th>
										<th>Doctor</th>
										<th>Transaction</th>
									</tr>
								</thead>
								<tbody>
									<tr *ngFor="let transaction of transactions">
										<th scope="row">{{transaction.id}}</th>
										<td>{{formatDate(transaction.dispense_date, true)}}</td>
										<td>{{transaction.doctor_firstname || 'null'}} {{transaction.doctor_lastname || 'null'}}</td>
										<td>
											<button class="btn btn-default btn-sm" (click)="viewTransaction(transaction.id)"><i class="fa fa-fw fa-eye"></i></button>
											<button class="btn btn-danger btn-sm" (click)="lgModal.show()" *ngIf="isAdmin"><i class="fa fa-fw fa-times"></i></button>
										</td>
									</tr>
								</tbody>
							</table>
							<p *ngIf="transactions.length == 0" style="text-align: center;">Empty List.</p>
							<div class="row">
								<div class="col-lg-12">
									<div class="loader" *ngIf="isLoading">
										<div class="bounce1"></div>
										<div class="bounce2"></div>
										<div class="bounce3"></div>
									</div>
								</div>
							</div>

							<div class="row">
								<div class="col-lg-6">
									<!-- <pre class="card card-block card-header">Page: {{bigCurrentPage}} / {{numPages}}</pre> -->
								</div>
								<div class="col-lg-6" style="text-align: right;">
									<pagination (pageChanged)="pageChanged($event)" [totalItems]="bigTotalItems" [(ngModel)]="bigCurrentPage" [maxSize]="maxSize" class="pagination-sm"
									[boundaryLinks]="true" [rotate]="false" (numPages)="numPages = $event"></pagination>
								</div>
							</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	</div>

</div>
